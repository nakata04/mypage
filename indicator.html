<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="./cp_navi.css">
  <link rel="stylesheet" href="./google-code-prettify/prettify1.css">
  <title>Tradeing Indicator</title>
  <script lang="python" type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>

<body style="background-image: url(./wall/b029.gif);">
  <script src="./google-code-prettify/prettify.js"></script>
  <script>
    window.addEventListener("load", function() {
      PR.prettyPrint();
    });
  </script>

  <script type="text/javascript">
    var day = new Date(document.lastModified);
    var y = day.getFullYear();
    var m = day.getMonth() + 1;
    var d = day.getDate();

    var week = new Array("Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat");
    var w = week[day.getDay()];

    if (m < 10) m = "0" + m; // 数値が1～9の時には
    if (d < 10) d = "0" + d; // 0 を追加してそろえる

    document.write("Last Update: " + y + "/" + m + "/" + d + " (" + w + ")");
  </script>

  <div id="A_top">
    <ul>
      <li><a href="./home.html">HOME</a></li>
      <li>
        <a href="./trade.html">TRADE<span class="caret"></span></a>
        <div>
          <ul>
            <li><a href="./indicator.html">Indicator</a></li>
            <li><a href="./trade_code.html">CODE1</a></li>
            <li><a href="./trade_code2.html">CODE2</a></li>
          </ul>
        </div>
      </li>
      <li>
        <a href="#">HOBBY<span class="caret"></a>
        <div>
          <ul>
            <li><a href="./othello.html">othello</a></li>
            <li><a href="./translate.html">translate</a></li>
            <li><a href="./equation.html">equation</a></li>
          </ul>
        </div>
      </li>
      <li><a href="#">HELP</a></li>
    </ul>
  </div>

  <div id="B_left">
    <a href="#entry">エントリー</a>
    <a href="#exit">決済</a>
    <a href="#rsi">RSI</a>
    <a href="#macd">MACD</a>
    <a href="#ema">EMA</a>
  </div>

  <div id="D_center">
    <header>
      <h1>インジケータ</h1>
    </header>

    <h2>インジケータと売買判定</h2>
    <h3 id="entry">エントリー</h3>
    <li>ブレイクアウト</li>
    <p>一定期間の高値を終値がブレイクを確認した後、トレンドに従ってエントリーする。</p>
    <li>サポート</li>
    <p>一定期間の高値で終値をサポートしたことを確認して、逆張りでエントリーする。</p>

    <table border="1" bgcolor="f5f5f5">
      <tr>
        <th colspan="2" rowspan="2"></th>
        <th colspan="4">MACD</th>
      </tr>
      <tr>
        <td align="center" valign="top" width="100">X < 0</td>
        <td align="center" valign="top" width="100">下クロス</td>
        <td align="center" valign="top" width="100">上クロス</td>
        <td align="center" valign="top" width="100">X > 0</td>
      </tr>
      <tr>
        <th rowspan="5" width="50">RSI</th>
        <td align="center" valign="top" width="70">10以下</td>
        <td align="center" valign="top" bgcolor="#87cefa">売</td>
        <td align="center" valign="top" bgcolor="#87cefa">売</td>
        <td align="center" valign="top" bgcolor="#87cefa">売</td>
        <td align="center" valign="top" bgcolor="#87cefa">-</td>
      </tr>
      <tr>
        <td align="center" valign="top">10-20</td>
        <td align="center" valign="top" bgcolor="#87cefa">売</td>
        <td align="center" valign="top" bgcolor="#87cefa">売</td>
        <td align="center" valign="top" bgcolor="#87cefa">-</td>
        <td align="center" valign="top" bgcolor="#87cefa">-</td>
      </tr>
      <tr>
        <td align="center" valign="top">20-80</td>
        <td align="center" valign="top">売</td>
        <td align="center" valign="top">-</td>
        <td align="center" valign="top">-</td>
        <td align="center" valign="top">買</td>
      </tr>
      <tr>
        <td align="center" valign="top">80-90</td>
        <td align="center" valign="top" bgcolor="ffa07a">-</td>
        <td align="center" valign="top" bgcolor="ffa07a">-</td>
        <td align="center" valign="top" bgcolor="ffa07a">買</td>
        <td align="center" valign="top" bgcolor="ffa07a">買</td>
      </tr>
      <tr>
        <td align="center" valign="top">90以上</td>
        <td align="center" valign="top" bgcolor="ffa07a">-</td>
        <td align="center" valign="top" bgcolor="ffa07a">買</td>
        <td align="center" valign="top" bgcolor="ffa07a">買</td>
        <td align="center" valign="top" bgcolor="ffa07a">買</td>
      </tr>
    </table>

    \begin{align}
    X \equiv \frac{d(\mathrm{MACD-シグナル})}{dt}
    \end{align}

    条件が複雑かつ困難
    提案：複数の指数の総合的な判定指数を定義してはどうか

    <h3 id="exit">決済</h3>
    <p>基本的にエントリーと同じ仕組みで行う。ただし、パラメータの設定を変更し条件を緩和することで、エントリーよりも簡単に決済できるようにする。</p>

    <h2>オシレーター系</h2>
    <ol type="1">
      <li id="rsi">相対力指数 (Relative Strength Index : RSI)</li>
      <p>全体の変動幅から、相場の過熱感（買われ過ぎ、売られ過ぎ）を判断する</p>

      \begin{align}
      \mathrm{RS} &= \frac{期間中の平均上昇幅}{期間中の平均下落幅} \equiv \frac{\alpha}{\beta} \\
      \mathrm{RSI} &= \left( 1 - \frac{1}{1 - \mathrm{RS}} \right) \times 100 \\
      &= \left( 1 - \frac{\beta}{\beta - \alpha} \right) \times 100
      \end{align}

      <ol type="a">
        <li>平均上昇幅 (sum_positive)</li>
        最初 : (14日間の上昇幅の合計)÷14
        <br>
        以降 : (前日までの平均上昇幅 × (14-1)+直近の上昇幅)÷14
        <li>平均下落幅 (sum_negative)</li>
        最初 : (14日間の下落幅の合計)÷14
        <br>
        以降 : (前日までの平均下落幅 × (14-1)+直近の下落幅)÷14
      </ol>

      <br>
      <div style="width: 95%; overflow-x: scroll; padding: 10px; margin-bottom: 10px; border: 1px solid #333333; background-color: #ffffcc;">
        <pre><code class="prettyprint linenums">    def RSI(last_data, BASE):
        sum_positive = 0
        sum_negative = 0
        i = 1
        while (i <= RSI_BIN):
            if last_data[-(i+BASE)]["close_price"] >= last_data[-(i+1+BASE)]["close_price"]:
                sum_positive += last_data[-(i+BASE)]["close_price"] - last_data[-(i+1+BASE)]["close_price"]
            else:
                sum_negative += last_data[-(i+1+BASE)]["close_price"] - last_data[-(i+BASE)]["close_price"]

            i += 1

        rsi = (1 - (sum_negative / (sum_negative + sum_positive))) * 100

        return rsi</code></pre>
      </div>

      <br>
      <li id="macd">MACD (Moving Average Convergence and Divergence)</li>

      \begin{align}
      \mathrm{MACD} &= 短期\mathrm{EMA}_{(k)} - 長期\mathrm{EMA}_{(k)} \\
      \mathrm{SIGNAL} &= \frac{1}{n} \sum_{i=0}^{n-1} \mathrm{MACD}_{(k)}
      \end{align}

      <div style="width: 95%; overflow-x: scroll; padding: 10px; margin-bottom: 10px; border: 1px solid #333333; background-color: #ffffcc;">
        <pre><code class="prettyprint linenums">    def MACD(last_data, BASE):
        sig = 0
        i   = 0
        while(i < SIGNAL_SMOOTH):
            sig += EMA(last_data, MACD_FAST, i+BASE) - EMA(last_data, MACD_SLOW, i+BASE)
            i += 1

        macd = EMA(last_data, MACD_FAST, BASE) - EMA(last_data, MACD_SLOW, BASE)
        sign = sig / SIGNAL_SMOOTH
        return macd, sign</code></pre>
      </div>


      <br>
      <li id="ema">指数平滑移動平均 (Exponential Moving Average : EMA)</li>
      <p>直近の値動きを重視する移動平均線</p>
      \begin{align}
      \mathrm{EMA}_{(1)} &= \frac{1}{n} \sum_{i=0}^{n-1} 終値(i) \\
      \mathrm{EMA}_{(k)} &= \mathrm{EMA}_{(k-1)} + \frac{2}{n+1} \times (終値 - \mathrm{EMA}_{(k-1)}) \ \ \ \ \ (k \geq 2)
      \end{align}
      <div style="width: 95%; overflow-x: scroll; padding: 10px; margin-bottom: 10px; border: 1px solid #333333; background-color: #ffffcc;">
        <pre><code class="prettyprint linenums">    def EMA(last_data, DAY, BASE):
        ma = 0
        i = 0
        while(i < DAY):
            ma += last_data[-(DAY + i + BASE)]["close_price"]
            i += 1
        ema = ma / DAY

        alpha = 2 / (DAY + 1)
        j = 0
        while (j < DAY):
            ema += alpha * (last_data[-(DAY - j + BASE)]["close_price"] - ema)
            j += 1
        return ema</code></pre>
      </div>
    </ol>
  </div>

  <br><br><br><br>

</body>

</html>
